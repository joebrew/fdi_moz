(function(b,a){if(typeof exports=="object"){module.exports=a();}else{if(false&&typeof define=="function"&&define.amd){define(a);}else{b.Spinner=a();}}})(this,function(){var E=["webkit","Moz","ms","O"],k={},w;function A(f,a){var c=document.createElement(f||"div"),d;for(d in a){c[d]=a[d];}return c;}function z(d){for(var a=1,c=arguments.length;a<c;a++){d.appendChild(arguments[a]);}return d;}var C=function(){var a=A("style",{type:"text/css"});z(document.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet;}();function D(G,p,m,r){var c=["opacity",p,~~(G*100),m,r].join("-"),h=0.01+m/r*100,i=Math.max(1-(1-G)/p*(100-h),G),H=w.substring(0,w.indexOf("Animation")).toLowerCase(),e=H&&"-"+H+"-"||"";if(!k[c]){C.insertRule("@"+e+"keyframes "+c+"{0%{opacity:"+i+"}"+h+"%{opacity:"+G+"}"+(h+0.01)+"%{opacity:1}"+(h+p)%100+"%{opacity:"+G+"}100%{opacity:"+i+"}}",C.cssRules.length);k[c]=1;}return c;}function b(a,c){var f=a.style,d,h;c=c.charAt(0).toUpperCase()+c.slice(1);for(h=0;h<E.length;h++){d=E[h]+c;if(f[d]!==undefined){return d;}}if(f[c]!==undefined){return c;}}function q(d,a){for(var c in a){d.style[b(d,c)||c]=a[c];}return d;}function x(f){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var d in c){if(f[d]===undefined){f[d]=c[d];}}}return f;}function F(c){var a={x:c.offsetLeft,y:c.offsetTop};while(c=c.offsetParent){a.x+=c.offsetLeft,a.y+=c.offsetTop;}return a;}function j(c,a){return typeof c=="string"?c:c[a%c.length];}var B={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto",position:"relative"};function g(a){if(typeof this=="undefined"){return new g(a);}this.opts=x(a||{},g.defaults,B);}g.defaults={};x(g.prototype,{spin:function(O){this.stop();var u=this,K=u.opts,M=u.el=q(A(0,{className:K.className}),{position:K.position,width:0,zIndex:K.zIndex}),N=K.radius+K.length+K.width,f,I;if(O){O.insertBefore(M,O.firstChild||null);I=F(O);f=F(M);q(M,{left:(K.left=="auto"?I.x-f.x+(O.offsetWidth>>1):parseInt(K.left,10)+N)+"px",top:(K.top=="auto"?I.y-f.y+(O.offsetHeight>>1):parseInt(K.top,10)+N)+"px"});}M.setAttribute("role","progressbar");u.lines(M,u.opts);if(!w){var o=0,L=(K.lines-1)*(1-K.direction)/2,i,H=K.fps,J=H/K.speed,Q=(1-K.opacity)/(J*K.trail/100),G=J/K.lines;(function P(){o++;for(var a=0;a<K.lines;a++){i=Math.max(1-(o+(K.lines-a)*G)%J*Q,K.opacity);u.opacity(M,a*K.direction+L,i,K);}u.timeout=u.el&&setTimeout(P,~~(1000/H));})();}return u;},stop:function(){var a=this.el;if(a){clearTimeout(this.timeout);if(a.parentNode){a.parentNode.removeChild(a);}this.el=undefined;}return this;},lines:function(i,d){var h=0,c=(d.lines-1)*(1-d.direction)/2,f;function m(e,a){return q(A(),{position:"absolute",width:d.length+d.width+"px",height:d.width+"px",background:e,boxShadow:a,transformOrigin:"left",transform:"rotate("+~~(360/d.lines*h+d.rotate)+"deg) translate("+d.radius+"px,0)",borderRadius:(d.corners*d.width>>1)+"px"});}for(;h<d.lines;h++){f=q(A(),{position:"absolute",top:1+~(d.width/2)+"px",transform:d.hwaccel?"translate3d(0,0,0)":"",opacity:d.opacity,animation:w&&D(d.opacity,d.trail,c+h*d.direction,d.lines)+" "+1/d.speed+"s linear infinite"});if(d.shadow){z(f,q(m("#000","0 0 4px #000"),{top:2+"px"}));}z(i,z(f,m(j(d.color,h),"0 0 1px rgba(0,0,0,.1)")));}return i;},opacity:function(d,a,c){if(a<d.childNodes.length){d.childNodes[a].style.opacity=c;}}});function v(){function a(d,c){return A("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c);}C.addRule(".spin-vml","behavior:url(#default#VML)");g.prototype.lines=function(d,f){var m=f.length+f.width,t=2*m;function G(){return q(a("group",{coordsize:t+" "+t,coordorigin:-m+" "+-m}),{width:t,height:t});}var c=-(f.width+f.length)*2+"px",h=q(G(),{position:"absolute",top:c,left:c}),H;function n(l,o,i){z(h,z(q(G(),{rotation:360/f.lines*l+"deg",left:~~o}),z(q(a("roundrect",{arcsize:f.corners}),{width:m,height:f.width,left:f.radius,top:-f.width>>1,filter:i}),a("fill",{color:j(f.color,l),opacity:f.opacity}),a("stroke",{opacity:0}))));}if(f.shadow){for(H=1;H<=f.lines;H++){n(H,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");}}for(H=1;H<=f.lines;H++){n(H);}return z(d,h);};g.prototype.opacity=function(l,c,d,h){var f=l.firstChild;h=h.shadow&&h.lines||0;if(f&&c+h<f.childNodes.length){f=f.childNodes[c+h];f=f&&f.firstChild;f=f&&f.firstChild;if(f){f.opacity=d;}}};}var y=q(A("group"),{behavior:"url(#default#VML)"});if(!b(y,"transform")&&y.adj){v();}else{w=b(y,"animation");}return g;});