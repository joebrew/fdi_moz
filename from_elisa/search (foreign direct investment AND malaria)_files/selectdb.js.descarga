(function(a,i){if(!i){throw"selectdb.js: ep is undefined";}var b,c,f,h,g,d;function l(){var s=c,r;while(s--){r=a(b[s]);if(r[0].checked===false){return true;}}return false;}function k(){var s=c,r;while(s--){r=a(b[s]);if(r[0].checked===true){return true;}}return false;}function o(s){var r=s.data("listItem");if(r.length){r[s[0].checked?"addClass":"removeClass"]("selected");}}function n(){f[0].checked=true;f.title=d;h.show();}function m(){f[0].checked=false;f.title=g;h.hide();}function e(){var r=a(this);var s=a(b).closest('input[value="'+r[0].value+'"]').not("#"+r.id);if(s.length){for(var t=0;t<s.length;t++){s[t].checked=r.is(":checked");o(s);}}if(r.is(":checked")){if(l()){m();}else{n();}}else{m();}o(r);}function q(){if(!k()){var r=a("#selectDbError").show().attr("tabIndex","-1");setTimeout(a.proxy(function(){this.focus();},r),500);return false;}return true;}function p(){var s=c;while(s--){var r=a(b[s]);if(!r[0].disabled){r[0].checked=f[0].checked;}o(r);}if(f[0].checked){n();}else{m();}}function j(u,t){g=u;d=t;f=a("#selectAllDbs :checkbox");b=a("#dbList :checkbox, #trialDbList :checkbox");c=b.length;h=a("#allDbsWarn");var s=c,r;a(f).click(p);while(s--){r=a(b[s]).click(e);r.data("listItem",r.closest("li"));o(r);}if(l()){m();}else{n();}}i.selectDb={init:j,updateAll:p,validate:q};})(jQuery,ep);