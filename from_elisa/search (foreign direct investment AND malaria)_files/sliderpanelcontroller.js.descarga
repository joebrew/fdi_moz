(function(a){ep.require(["ep/dualslider.js","spinner/spin.min.js"],function(){ep.registerClass("ep.base.SliderPanelController",{panelElement:null,panel:null,onDomLoad:function(){this.panel=jQuery("#"+this.panelElement);this.bindEvents();},bindEvents:function(){this.panel.find(".limControl").click(jQuery.proxy(this.formSubmit,this));this.panel.find(".limCaption a").click(jQuery.proxy(this.limiterLinkClickHandler,this));this.panel.bind("ep_DualSlider_sliderChanged.modalpanel",jQuery.proxy(this.formSubmit,this));},limiterLinkClickHandler:function(c){var d=jQuery(c.target);var b=d.closest("li").find("input");b.prop("checked",!b.prop("checked"));this.formSubmit();},formSubmit:function(){var b=this.panel.find(".controls input");if(b&&b.length>0&&b[0].name){this.showLoading();__doPostBack(b[0].name,"");}},showLoading:function(){this._layoutScreen();this.coverScreen.fadeTo(200,0.5);this.loadingMessage.show();},_layoutScreen:function(){if(!this.coverScreen){this.coverScreen=a("#modal-screen");}if(!this.coverScreen.length){this.coverScreen=a("<div>").attr("id","modal-screen").addClass("ui-widget-overlay").css("z-index",9000).hide();}a("body").append(this.coverScreen);var c={height:jQuery(window).height(),width:jQuery(window).width()};var b={height:jQuery(document).height(),width:jQuery(document).width()};b.height=b.height>c.height?b.height:c.height;b.width=b.width>c.width?b.width:c.width;this.coverScreen.css({top:"0",left:"0px",height:b.height+"px",width:b.width+"px"});if(!this.loadingMessage){this.loadingMessage=a("#modal-loading");}if(!this.loadingMessage.length){this.loadingMessage=a("<div>").attr({id:"modal-loading",tabIndex:"0","data-auto":"spinner"}).hide();var d=a("<div>").addClass("container").append("<span>Updating...</span>");var e={lines:9,length:4,width:2,radius:2,corners:1,rotate:13,direction:1,color:"#000",speed:0.8,trail:65,shadow:false,hwaccel:false,className:"spinner",zIndex:2000000000,top:"0px",left:"auto"};var f=new Spinner(e).spin(d.get(0));this.loadingMessage.append(d);}a("body").append(this.loadingMessage);this.loadingMessage.addClass("modal-loading").css({position:"fixed",top:((c.height/2)-(this.loadingMessage.outerHeight()/2))+"px",left:((c.width/2)-(this.loadingMessage.outerWidth()/2))+"px"});}},"ep.base.Controller");});})(jQuery);